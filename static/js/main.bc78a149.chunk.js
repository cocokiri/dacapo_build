(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,n,t){e.exports=t(359)},185:function(e,n,t){},349:function(e,n,t){},351:function(e,n,t){},356:function(e,n,t){},359:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(69),o=t.n(i),u=(t(185),t(14)),c=t.n(u),s=t(19),l=t(155),m=t(156),d=t(173),p=t(157),g=t(174),f=t(55),h=t(56),b="http://localhost:4000",v=t(7),E=t(16),w=t.n(E),y=t(28),j=t.n(y);t(198);j.a.initializeApp({apiKey:"AIzaSyC9CAxlZsQ7jzHBl5YkbUHY0zGxCwhq-cc",authDomain:"wisdom-c02f4.firebaseapp.com",databaseURL:"https://wisdom-c02f4.firebaseio.com",projectId:"wisdom-c02f4",storageBucket:"wisdom-c02f4.appspot.com",messagingSenderId:"1078468381731"});var S=j.a.auth();window.auth=S;var O=t(36);function k(){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(c.a.mark(function e(){var n,t,r=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.currentUser.getIdToken();case 2:return n=e.sent,t=new O.GraphQLClient(b,{headers:{Authorization:"Bearer ".concat(n)}}),console.log("gql request !"),e.abrupt("return",t.request.apply(t,r));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function T(){var e=Object(v.a)(["\n    query getGroup($name: String!){\n        groupByName(name:$name)\n        {\n            id\n            name\n            createdAt\n            reviews {\n                id\n                author {\n                    id\n                    name\n                }\n                description\n                targetType\n                target\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    emoji\n                    updatedAt\n                    description\n                    target\n                    targetType\n                    comments {\n                        id\n                        author {\n                            id\n                            name\n                        }\n                        updatedAt\n                        description\n                        target\n                        targetType\n                    }\n                }\n                emoji\n                groups {\n                    name\n                }\n                updatedAt\n                title\n            }\n            followers {\n                name\n                id\n            }\n        }\n    }"]);return T=function(){return e},e}function A(){var e=Object(v.a)(["\n    query group($groupId: String) {\n        group(groupId: $groupId) {\n            id\n            name\n            createdAt\n            reviews {\n                id\n                author {\n                    id\n                    name\n                }\n                description\n                targetType\n                target\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    emoji\n                    updatedAt\n                    description\n                    target\n                    targetType\n                    comments {\n                        id\n                        author {\n                            id\n                            name\n                        }\n                        updatedAt\n                        description\n                        target\n                        targetType\n                    }\n                }\n            }\n            followers {\n                name\n                id\n            }\n        }\n    }\n"]);return A=function(){return e},e}function $(){var e=Object(v.a)(["\n    query userByName($name: String!) {\n        userByName(name: $name) {\n            id\n            name\n            follows{\n                name\n                followers {\n                    name\n                }\n            }\n            description\n\n            reviews {\n                id\n                author {\n                    name\n                    id\n                }\n                target\n                targetType\n                updatedAt\n                createdAt\n                emoji\n                description\n            }\n        }\n    }\n"]);return $=function(){return e},e}function q(){var e=Object(v.a)(["\n    query user($fibauid: String!) {\n        user(fibauid: $fibauid) {\n            id\n            name\n\n            roles {\n                role\n                group {\n                    id\n                    name\n                    description\n                }\n            }\n            description\n\n            reviews {\n                id\n                author {\n                    name\n                    id\n                }\n                target\n                targetType\n                updatedAt\n                createdAt\n                emoji\n                description\n            }\n        }\n    }\n"]);return q=function(){return e},e}function I(){var e=Object(v.a)(["\n    query getRoles($userId: String) {\n        getRoles(userId: $userId) {\n            user {\n                id\n                name\n            }\n            role\n            group {\n                name\n                id\n            }\n        }\n    }\n"]);return I=function(){return e},e}function N(){var e=Object(v.a)(["\n    query groups($userId: String) {\n        groups (userId: $userId) {\n            id\n            name\n            description\n            reviews {\n                id\n                author {\n                    id\n                    name\n                }\n                description\n                targetType\n                target\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    emoji\n                    updatedAt\n                    description\n                    target\n                    targetType\n                    comments {\n                        id\n                        author {\n                            id\n                            name\n                        }\n                        updatedAt\n                        description\n                        target\n                        targetType\n                    }\n                }\n            }\n            followers {\n                name\n            }\n        }\n    }\n"]);return N=function(){return e},e}function C(){var e=Object(v.a)(["\n    query reviewsForTaret($target:String!) {\n        reviewsForTarget(target: $target) {\n            id\n            author {\n                id\n                name\n            }\n            description\n            targetType\n            target\n            comments {\n                id\n                author {\n                    id\n                    name\n                }\n                emoji\n                updatedAt\n                description\n                target\n                targetType\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    updatedAt\n                    description\n                    target\n                    targetType\n                }\n            }\n            emoji\n            groups {\n                name\n            }\n            updatedAt\n            title\n        }\n    }\n"]);return C=function(){return e},e}function F(){var e=Object(v.a)(["\n    query reviewsForUserGroups {\n        reviewsForUserGroups {\n            id\n            author {\n                id\n                name\n            }\n            description\n            targetType\n            target\n            comments {\n                id\n                author {\n                    id\n                    name\n                }\n                emoji\n                updatedAt\n                description\n                target\n                targetType\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    updatedAt\n                    description\n                    target\n                    targetType\n                }\n            }\n            emoji\n            groups {\n                name\n            }\n            updatedAt\n            title\n        }\n    }\n"]);return F=function(){return e},e}function _(){var e=Object(v.a)(["\n    query reviewsForGroups($groups: [String!]) {\n        reviewsForGroups(group: $groups) {\n            id\n            author {\n                id\n                name\n            }\n            description\n            targetType\n            target\n            comments {\n                id\n                author {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]);return _=function(){return e},e}function G(){var e=Object(v.a)(["\n    query reviews($userId:String, $username: String) {\n        reviews (userId: $userId, username: $username) {\n            id\n            author {\n                id\n                name\n            }\n            description\n            targetType\n            target\n            comments {\n                id\n                author {\n                    id\n                    name\n                }\n                emoji\n                updatedAt\n                description\n                target\n                targetType\n                comments {\n                    id\n                    author {\n                        id\n                        name\n                    }\n                    updatedAt\n                    description\n                    target\n                    targetType\n                }\n            }\n            emoji\n            groups {\n                name\n            }\n            updatedAt\n            title\n        }\n    }\n"]);return G=function(){return e},e}var P=w()(G()),U=(w()(_()),w()(F())),R=w()(C()),z=w()(N()),B=(w()(I()),w()(q())),L=w()($()),D=(w()(A()),w()(T())),V=function(e){return k(D,{name:e})},M=function(e){return k(L,{name:e})},J=function(){return k(U,{})},W=function(){return k(P,{})},H=function(){return k(z,{})},Y={signed_out:0,signed_in_unverified:1,signed_in_verfied:2},Q=function(e){function n(){var e;Object(l.a)(this,n),(e=Object(d.a)(this,Object(p.a)(n).call(this))).state={authState:Y.signed_out,user:null,uid:null,idToken:sessionStorage.getItem("lupa_token"),lupa_user:JSON.parse(sessionStorage.getItem("lupa_user"))};var t=Object(f.a)(Object(f.a)(e));return setInterval(function(){return t.state.user?t.getIdToken(t.state.user):null},72e4),S.onAuthStateChanged(function(){var n=Object(s.a)(c.a.mark(function n(t){var r,a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.uid!==e.state.uid){n.next=2;break}return n.abrupt("return");case 2:if(e.setState({user:t}),!t){n.next=15;break}return console.log("user",t,"user"),n.next=7,e.getIdToken(t);case 7:return r=n.sent,n.next=10,e.getUser(t.uid);case 10:a=n.sent,e.setState({idToken:r,lupa_user:a,user:t,uid:t.uid,authState:t.emailVerified?Y.signed_in_verfied:Y.signed_in_unverified}),e.state.authState<1&&sessionStorage.clear(),n.next=16;break;case 15:e.setState({authState:Y.signed_out});case 16:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()),e}return Object(g.a)(n,e),Object(m.a)(n,[{key:"getUser",value:function(){var e=Object(s.a)(c.a.mark(function e(n){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=n,Object(O.request)(b,B,{fibauid:a});case 2:return t=e.sent,r=t.user,console.log("luparillo",r),sessionStorage.setItem("lupa_user",JSON.stringify(r)),e.abrupt("return",r);case 7:case"end":return e.stop()}var a},e,this)}));return function(n){return e.apply(this,arguments)}}()},{key:"getIdToken",value:function(){var e=Object(s.a)(c.a.mark(function e(n){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIdToken();case 2:return t=e.sent,sessionStorage.setItem("lupa_token",t),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()}]),n}(h.a),K=(t(175),t(159),t(93),t(54),t(363),t(164),t(3),t(176),t(27),t(17)),X=t(12),Z={signOut:function(){return j.a.auth().signOut()},signIn:function(e,n){return j.a.auth().signInWithEmailAndPassword(e,n)},register:function(e,n){return new Promise(function(t,r){return j.a.auth().createUserWithEmailAndPassword(e,n).then(function(e){t(e.user),j.a.auth().currentUser.sendEmailVerification()}).catch(function(e){throw r(e),e})})},resendEmailVerification:function(){return j.a.auth().currentUser.sendEmailVerification()},sendPasswordResetEmail:function(e){return j.a.auth().sendPasswordResetEmail(e)}},ee=Object(X.c)({mapPropsToValues:function(){return{email:"",password:""}},validationSchema:K.object().shape({email:K.string().email("Email not valid").required("Email is required"),password:K.string().required("A Password would be a good idea").min(6,"Password is too short - should be 6 chars minimum.")}),handleSubmit:function(e,n){var t=e.email,r=e.password,a=n.resetForm,i=n.setErrors,o=n.setSubmitting;console.log("here account"),Z.signIn(t,r).then(function(e){return o(!1)}).catch(function(e){a(),i({api:e})})}})(function(e){var n=e.values,t=e.errors,r=e.touched,i=e.isSubmitting;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"Sign In"),a.a.createElement(X.b,{className:"login-form"},a.a.createElement("div",{className:"credentials"},a.a.createElement(X.a,{type:"email",name:"email",placeholder:"email"}),r.email&&t.email&&a.a.createElement("p",null,t.email),a.a.createElement(X.a,{type:"password",name:"password",placeholder:"password"}),r.password&&t.password&&a.a.createElement("p",null,t.password)),a.a.createElement("div",{className:"login-links"}),t.api&&a.a.createElement("p",null,"There was an error: ".concat(t.api)),a.a.createElement("button",{type:"submit",title:"Sign in",disabled:!n.email||!n.password||i},"Log In")))});function ne(){var e=Object(v.a)(["\n    query getName($name: String!){\n        userByName(name:$name)\n        {\n            name\n            id\n        }\n    }"]);return ne=function(){return e},e}function te(){var e=Object(v.a)(['\n    mutation createUser{\n        createUser(name:"','", email:"','", fibauid: "','")\n        {\n            id\n            name\n        }\n    }\n  ']);return te=function(){return e},e}var re=function(e,n,t){var r=w()(te(),e,n,t);return Object(O.request)(b,r)},ae=function(e){var n=w()(ne());return Object(O.request)(b,n,{name:e})},ie=Object(X.c)({mapPropsToValues:function(){return{name:"",email:"",password:""}},validationSchema:K.object().shape({name:K.string().required("You need a display name").min(3,"minimum 3 chars").matches(/^([a-z\d]+_)*[a-z\d]+$/i,"no weird signs pls"),email:K.string().email("Email not valid").required("Email is required"),password:K.string().required("A Password would be a good idea").min(6,"Password is too short - should be 6 chars minimum.")}),handleSubmit:function(){var e=Object(s.a)(c.a.mark(function e(n,t){var r,a,i,o,u,s,l,m,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,a=n.password,i=n.name,o=t.resetForm,u=t.setErrors,s=t.setSubmitting,e.prev=2,e.next=5,ae(i);case 5:if(l=e.sent,console.log(l,"getname"),!l.userByName){e.next=10;break}return u({submitter:"Displayname is taken :( "}),e.abrupt("return");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),u({submitter:e.t0.message}),e.abrupt("return");case 16:return e.prev=16,e.next=19,Z.register(r,a);case 19:return m=e.sent,console.log("user fiba",m),d=m.uid,e.next=24,re(i,r,d);case 24:e.sent,e.next=31;break;case 27:e.prev=27,e.t1=e.catch(16),u({submitter:e.t1.message}),o();case 31:u({submitter:"success!"}),s(!1);case 33:case"end":return e.stop()}},e,this,[[2,12],[16,27]])}));return function(n,t){return e.apply(this,arguments)}}()})(function(e){var n=e.touched,t=e.values,r=e.errors,i=t.name,o=t.email,u=t.password;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"Register"),a.a.createElement(X.b,{className:"login-form"},a.a.createElement("div",{className:"credentials"},a.a.createElement(X.a,{name:"name",value:i.toLowerCase(),placeholder:"displayname"}),r.name&&a.a.createElement("div",null,r.name),a.a.createElement(X.a,{name:"email",value:o,placeholder:"Email Address"}),n.email&&r.email&&a.a.createElement("div",null,r.email),a.a.createElement(X.a,{name:"password",type:"password",placeholder:"password"}),n.password&&r.password&&a.a.createElement("div",null,r.password)),a.a.createElement("div",{className:"error"}),r.submitter&&a.a.createElement("p",null,r.submitter),r.api&&a.a.createElement("p",null,"Error while registering : ".concat(r.api)),a.a.createElement("button",{type:"submit",title:"Sign up",disabled:!o||!u||!i},"Submit")))});t(349);function oe(e){e.info;var n=e.children;return a.a.createElement("div",{className:"card"},n)}var ue=t(11);t(351);var ce=function(e){return"https://lupareader.com/user/"+e};function se(e){return function(e,n){var t=e-n;return t<2e4?"just now":t<6e4?"less than 1 min ago":t<36e5?Math.round(t/6e4)+" min ago":t<864e5?Math.round(t/36e5)+" h ago":t<2592e6?Math.round(t/864e5)+" days ago":t<31536e6?Math.round(t/2592e6)+" mo ago":Math.round(t/31536e6)+" years ago"}((new Date).getTime(),new Date(e).getTime())}var le=function(e,n){return e[n].reduce(function(e,t){return e+t[n].length},0)+e[n].length};var me=function(e){var n=e.split("https://"),t=n[n.length-1].split("www.");return t[t.length-1]},de=t(37);function pe(){var e=Object(v.a)(["\n    mutation createGroup($name: String!, $description: String!) {\n        createGroup(name: $name, description: $description) {\n            followers {\n                name\n            }\n            name\n            description\n        }\n    }\n"]);return pe=function(){return e},e}function ge(){var e=Object(v.a)(["\n    mutation unfollowGroup($group: String!) {\n        unfollowGroup(group: $group) {\n            name\n            id\n        }\n    }\n"]);return ge=function(){return e},e}function fe(){var e=Object(v.a)(["\n    mutation followGroup($group: String!) {\n        followGroup(group: $group) {\n            name\n            id\n        }\n    }\n"]);return fe=function(){return e},e}function he(){var e=Object(v.a)(["\n    mutation createUser($name: String!, $email: String!, $fibauid: String!) {\n        createUser(name: $name, email: $email, fibauid: $fibauid) {\n            id\n            name\n            email\n        }\n    }\n"]);return he=function(){return e},e}function be(){var e=Object(v.a)(["\n    mutation deleteReview($id: String!) {\n        deleteReview(id: $id) {\n            target\n            author {\n                name\n                id\n            }\n        }\n    }\n"]);return be=function(){return e},e}function ve(){var e=Object(v.a)(["\n    mutation createReview($title: String, $target: String!, $description: String!, $targetType: String) {\n        createReview(title: $title, target: $target, targetType: $targetType, description: $description) {\n            id\n            title\n            target\n            author {\n                id\n                name\n            }\n            description\n        }\n    }\n"]);return ve=function(){return e},e}var Ee=Object(de.a)(ve()),we=Object(de.a)(be()),ye=(Object(de.a)(he()),Object(de.a)(fe())),je=Object(de.a)(ge()),Se=Object(de.a)(pe()),Oe=function(e,n){return k(Se,{name:e,description:n})},ke=function(e){return k(ye,{group:e})},xe=function(e){return k(je,{group:e})},Te=function(e,n,t,r){return k(Ee,{target:e,title:t,description:r,targetType:n})},Ae={cursor:"pointer",fontStyle:"underline",fontSize:"1rem",textDecoration:"underline",color:"grey"},$e={fontSize:"0.8rem",padding:"1rem",color:"darkgrey"},qe={background:"darkblue",color:"white",fontStyle:"bold",padding:"0.5rem",cursor:"pointer",width:"50%"},Ie={cursor:"pointer",background:"darkgreen",color:"white",fontStyle:"bold",padding:"0.5rem",width:"50%"};function Ne(e){var n=e.review,t=e.user,i=e.showmore,o=void 0===i||i,u=Object(r.useState)(!1),c=Object(ue.a)(u,2),s=c[0],l=c[1],m=Object(r.useState)(!o),d=Object(ue.a)(m,2),p=d[0],g=d[1],f=le(n,"comments");return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{key:n.id,className:"textbubbles"},a.a.createElement("button",{className:"nametag",onClick:function(){return g(!p)}},n.author.name),a.a.createElement("span",null,n.emoji&&isNaN(n.emoji)?String.fromCodePoint(n.emoji):""),!p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"reviewtitle"},n.title||"/"),a.a.createElement("span",{className:"targettext"},me(n.target)||"/"),a.a.createElement("span",{style:{color:"grey",fontSize:"0.7rem"}},se(n.updatedAt)),a.a.createElement("br",null),a.a.createElement("div",{style:{marginLeft:"2rem"}},a.a.createElement("span",{className:"reviewtext"},a.a.createElement("span",{style:{background:"purple",color:"white",borderRadius:"100px",padding:"0.1rem",margin:"0.2rem"}},f),n.description),a.a.createElement("span",{style:Ae}," ",n.groups.map(function(e){return a.a.createElement("div",null,"@"+e.name+" ")})),a.a.createElement(Ce,{targetId:n.id}),a.a.createElement("span",{style:Ae,onClick:function(){return l(!s)}},s?"  Hide":"  Show Opinions (".concat(f,")"))))),s&&n.comments.map(function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"comment",key:e.id},a.a.createElement(Fe,{review:e,user:t}),a.a.createElement(Ce,{targetId:e.id,text:"Reply"})),e.comments.map(function(e){return a.a.createElement("div",{className:"reply",key:e.id},a.a.createElement(Fe,{review:e,user:t}))}),a.a.createElement("br",null))}))}function Ce(e){var n=e.targetId,t=e.text,i=void 0===t?"Comment":t,o=Object(r.useState)(null),u=Object(ue.a)(o,2),c=u[0],s=u[1],l=Object(r.useState)(""),m=Object(ue.a)(l,2),d=m[0],p=m[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:Ae,onClick:function(){return s(!0)}},i),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("textarea",{onChange:function(e){return p(e.target.value)},value:d,placeholder:d||"".concat(String.fromCodePoint(128073)," leave a comment ? "),cols:"20",rows:"3"}),a.a.createElement("span",{style:Ae,onClick:function(){s(!1),Te(n,"review",null,d)}}," OK"),a.a.createElement("span",{style:Ae,onClick:function(){return s(!1)}}," | Cancel")))}var Fe=function(e){var n=e.review,t=e.user;return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:ce(n.author.name),className:"nametag"},n.author.name," ","   "),a.a.createElement("span",{style:{background:"#e2dede",borderRadius:"10px",padding:"0.2rem"}}," ",n.description," "),t.id===n.author.id&&a.a.createElement("span",{onClick:function(){return e=n.id,k(we,{id:e});var e},style:{cursor:"pointer",color:"red",fontSize:"0.6rem",fontWeight:"bolder"}},"   X   "))},_e=(Date.now(),function(e){var n=e.reviews,t=e.user,r=e.showmore;return n.map(function(e){return a.a.createElement(Ne,{review:e,user:t,fullPreview:r})})});var Ge=t(365),Pe=t(366),Ue=t(367),Re=t(169),ze=t.n(Re),Be=t(46);function Le(){var e=Object(v.a)(["\n  margin:0;\n  padding: ",";\n  text-align: center;\n  background: ",";\n  color: white;\n  // width: ",";\n  font-weight: ",";\n  font-size: 1.3rem;\n   -webkit-box-shadow:0 2px 4px rgba(0, 0, 0, 0.3);\n  box-shadow:0 3px 2px rgba(0, 0, 0, 0.2);\n"]);return Le=function(){return e},e}var De=Be.a.h1(Le(),function(e){return e.primary?"0.5em":"0.3em"},function(e){return e.primary?"black":"darkcyan"},function(e){return e.primary?"30vw":"10vw"},function(e){return e.primary?"bold":"400"});function Ve(){var e=Object(v.a)(["\n  cursor: pointer;\n  margin: 0.5rem;\n  padding: 0.5rem;\n  background: darkorange;\n  display: inline-block;\n  color: white;\n"]);return Ve=function(){return e},e}var Me=Be.a.div(Ve());function Je(e){var n=e.query,t=e.prop,i=void 0===t?null:t,o=e.children,u=Object(r.useState)(!0),l=Object(ue.a)(u,2),m=l[0],d=l[1],p=Object(r.useState)(!1),g=Object(ue.a)(p,2),f=g[0],h=g[1],b=Object(r.useState)(!1),v=Object(ue.a)(b,2),E=v[0],w=(v[1],Object(r.useState)({})),y=Object(ue.a)(w,2),j=y[0],S=y[1],O=Object(r.useState)(!1),k=Object(ue.a)(O,2),x=k[0],T=k[1];function A(){return(A=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,n();case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),h(e.t0),e.abrupt("return");case 11:console.log("DATAAA",t),d(!1),S(t),T(!0);case 15:case"end":return e.stop()}},e,this,[[1,7]])}))).apply(this,arguments)}return Object(r.useEffect)(function(){!function(){A.apply(this,arguments)}()},[E]),m?a.a.createElement("div",null,"...Loading"):x?o({error:f,data:i?j[i]:j,loading:m}):f?a.a.createElement("div",null,f.message):a.a.createElement("div",null,"Something failed somewhere...")}function We(e){var n=e.match,t=e.user,r=e.preview,i=void 0!==r&&r;return a.a.createElement(Je,{query:function(){return V(n.params.name)},prop:"groupByName"},function(e){var n=e.loading,r=e.error,o=e.data;if(n)return"Loading... (apparently GraphQL is slower than REST APIs...)";if(r)return"Error! ".concat(r.message);console.log(o,"group");var u=o;return a.a.createElement("section",null,a.a.createElement(De,{primary:!0},u.name),a.a.createElement(He,{details:u}),a.a.createElement("br",null),a.a.createElement("br",null),!i&&a.a.createElement(a.a.Fragment,null," ",a.a.createElement(De,null,"Activity :: "),a.a.createElement(_e,{reviews:u.reviews,showmore:!0,user:t})))})}function He(e){var n=e.details,t=Object(r.useState)(!1),i=Object(ue.a)(t,2);i[0],i[1];return a.a.createElement("div",null,a.a.createElement(De,null,"Subscribers (",n.followers.length,"): "),a.a.createElement("div",null,n.followers.map(function(e){return a.a.createElement(Me,{onClick:function(){return window.location.replace("/user/"+e.name)}},"@",e.name)})))}function Ye(){var e=Object(v.a)(["\n    cursor: pointer;\n    color: white;\n   \n    background: turquoise;\n    \n     &:hover {\n    background: #786b99;\n  }\n  z-index: 5;\n    transition-duration: 700ms;\n    padding: 0.8em;\n    font-size: 1.5em;\n    font-weight: bold;\n     -webkit-box-shadow: 0 5px 12px rgba(0, 0, 0, 0.6);\n     box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);\n"]);return Ye=function(){return e},e}var Qe=Be.a.button(Ye()),Ke=function(e,n){return n?(e.forEach(function(e){var t=n.find(function(n){return!!n.group&&n.group.id===e.id}),r="";t&&(r=t.role),e.membership=r}),e):e};function Xe(e){var n=e.user;return n||(n={roles:[]}),a.a.createElement(a.a.Fragment,null,a.a.createElement(De,null,"Lupa Groups "),a.a.createElement(Qe,{onClick:function(){return cn.push("/createGroup")}},"Create Group"),a.a.createElement(Je,{query:H},function(e){var t=e.loading,r=e.error,i=e.data;return t?"Loading...":r?"Error! ".concat(r.message):a.a.createElement("section",{style:{display:"flex",flexWrap:"wrap"}},Ke(i.groups,n.roles).sort(function(e){return e.membership?-1:1}).map(function(e){return a.a.createElement(oe,null,a.a.createElement("span",{style:Ae,onClick:function(){return cn.push("/group/".concat(e.name))}},e.name),a.a.createElement("figcaption",{style:$e},e.description),a.a.createElement("section",null,"Members: ",e.followers.length),a.a.createElement("section",null,"Activity: ",e.reviews.reduce(function(e,n){return e+le(n,"comments")},0)+e.reviews.length),a.a.createElement("div",{style:qe},e.membership),e.membership?a.a.createElement("button",{onClick:function(){return xe(e.id)},style:Ie},"Leave"):a.a.createElement("button",{onClick:function(){return ke(e.id)},style:Ie},"Join"))}))}))}function Ze(e){var n=e.match;e.user;return a.a.createElement(Je,{query:M,variables:{name:n.params.name}},function(e){var n=e.loading,t=e.error,r=e.data;if(n)return"Loading...";if(t)return"Error! ".concat(t.message);console.log(r,"group");var i=r.userByName;return a.a.createElement(a.a.Fragment,null,a.a.createElement(De,{primary:!0},i.name),a.a.createElement(De,null,"Activity :: "),a.a.createElement(_e,{reviews:i.reviews,user:i}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(De,null,"Groups :: "),i.follows&&i.follows.map(function(e){return a.a.createElement(Me,null,e.name)}))})}var en=t(364);t(356);function nn(e){e.history;return a.a.createElement("nav",null,a.a.createElement(en.a,{to:"/"},"HOME"),a.a.createElement(en.a,{to:"/account"},"ACCOUNT"),a.a.createElement(en.a,{to:"/about"},"ABOUT"),a.a.createElement(en.a,{to:"/groups"},"GROUPS"))}var tn=Object(X.c)({mapPropsToValues:function(){return{email:""}},validationSchema:K.object().shape({email:K.string().email("Email not valid").required("Email is required")}),handleSubmit:function(e,n){var t=e.email,r=n.setValues,a=(n.resetForm,n.setSubmitting);Z.sendPasswordResetEmail(t).then(function(e){r({sent:"Reset email sent to: ".concat(t)}),a(!1)})}})(function(e){var n=e.values,t=e.errors,r=(e.touched,e.isSubmitting);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"Forgot password"),a.a.createElement(X.b,{className:"login-form"},a.a.createElement("div",{className:"credentials"},a.a.createElement(X.a,{type:"email",name:"email",placeholder:"your email"})),t.api&&a.a.createElement("p",null,"There was an error: ".concat(t.api)),n.sent&&a.a.createElement("p",null,n.sent),a.a.createElement("button",{type:"submit",title:"Continue",disabled:r},"SUBMIT")))});function rn(e){var n=e.user,t=(n.id,n.name),r=(n.follows,n.description),i=n.email,o=n.reviews;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,t),a.a.createElement("div",null,i," "),a.a.createElement("div",null,"About : ",r),a.a.createElement("div",null,"Review Count: ",o.length))}function an(e){var n=e.lupa_user,t=Object(r.useState)(n?"account":"register"),i=Object(ue.a)(t,2),o=i[0],u=i[1];Object(r.useEffect)(function(){n&&u("account")},[n]);var c={account:null,register:"login",login:"register"}[o];return a.a.createElement(a.a.Fragment,null,"account"===o&&a.a.createElement(rn,{user:n}),"register"===o&&a.a.createElement(ie,null),"login"===o&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ee,null),a.a.createElement("button",{onClick:function(){return u("forgot")}}," Forgot Password")),"forgot"===o&&a.a.createElement(tn,null),c&&a.a.createElement("button",{onClick:function(){return u(c)}}," ",c," "))}function on(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Good you are here"),a.a.createElement("p",null,"*) Lupa is about finding and discussing cool resources on the web together where they are. Right now it's version 0.007 ;) Bugs, sometimes slow loading speeds etc.",a.a.createElement("br",null),a.a.createElement("br",null)),a.a.createElement("p",null,"*) When you come across an article/content (url, really) that was reviewed by someone in that group you'll see that on the ICON at the bottom of your screen",a.a.createElement("br",null),a.a.createElement("br",null),"*) I made this to connect friends and people through their real (maybe intellectual) interests and to get the most diverse opinions"),a.a.createElement("p",null,a.a.createElement("br",null),a.a.createElement("br",null),"*) All your thoughts on a content show up exactly when someone comes across the place on the web (url). Unlike sharing on some platform your input won't be lost at the bottom of some chat feed the day after!",a.a.createElement("br",null),a.a.createElement("br",null),"*) Data only gets stored when you submit. There is no background data processing going on otherwise (except for querying the Database if there are reviews for the URL you're at)"))}var un=Object(X.c)({mapPropsToValues:function(){return{name:"",description:""}},validationSchema:K.object().shape({name:K.string().required("Your group needs a display name").min(3,"minimum 3 chars").max(16,"20 characters is the limit right now").matches(/^([a-z\d]+_)*[a-z\d]+$/i,"no weird signs pls"),description:K.string().required("Put a group description there").min(10,"Tell me a bit more... about the group").min(80,"80 characters max for now. Thanks")}),handleSubmit:function(){var e=Object(s.a)(c.a.mark(function e(n,t){var r,a,i,o,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.description,a=n.name,t.resetForm,i=t.setErrors,o=t.setSubmitting,e.prev=2,e.next=5,V(a);case 5:if(u=e.sent,console.log(u,"getname"),!u.groupByName){e.next=10;break}return i({submitter:"Groupname is taken :( "}),e.abrupt("return");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),i({submitter:e.t0.message}),e.abrupt("return");case 16:return e.prev=16,e.next=19,Oe(a,r);case 19:e.sent,i({submitter:"Group ".concat(a," created!")}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),i({submitter:e.t1.message});case 26:o(!1);case 27:case"end":return e.stop()}},e,this,[[2,12],[16,23]])}));return function(n,t){return e.apply(this,arguments)}}()})(function(e){var n=e.touched,t=e.values,r=e.errors,i=t.name,o=t.description;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"Create a Group"),a.a.createElement(X.b,null,a.a.createElement("div",null,a.a.createElement(X.a,{name:"name",value:i.trim().toLowerCase(),placeholder:"group name. lowercased. no spaces"}),r.name&&a.a.createElement("div",null,r.name),a.a.createElement(X.a,{style:{width:"300px"},name:"description",value:o,placeholder:"Say a little bit about your group"}),n.description&&r.description&&a.a.createElement("div",null,r.description)),a.a.createElement("div",{className:"error"}),r.submitter&&a.a.createElement("p",null,r.submitter),a.a.createElement("button",{type:"submit",title:"Create Group",disabled:!o||!i},"Submit")))});t.d(n,"history",function(){return cn});var cn=ze()();o.a.render(a.a.createElement(Ge.a,{history:cn},a.a.createElement(h.b,null,a.a.createElement(h.c,{to:[Q]},function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(nn,null),a.a.createElement(Pe.a,null,a.a.createElement(Ue.a,{exact:!0,path:"/",component:function(n){return a.a.createElement(Je,Object.assign({},n,{query:W,prop:"reviews"}),function(n){return a.a.createElement("div",null,a.a.createElement("h1",null,"All thoughts we placed"),a.a.createElement(_e,{reviews:n.data,user:e.state.lupa_user,showmore:!0}))})}}),a.a.createElement(Ue.a,{exact:!0,path:"/about",component:on}),a.a.createElement(Ue.a,{exact:!0,path:"/groups",component:function(){return a.a.createElement(Xe,{user:e.state.lupa_user})}}),a.a.createElement(Ue.a,{exact:!0,path:"/creategroup",component:un}),a.a.createElement(Ue.a,{exact:!0,path:"/thread",component:function(){return a.a.createElement(Je,{query:function(){return k(R,{target:"whoooores"})},prop:"reviewsForTarget"},function(n){return console.log("STTAET",n),a.a.createElement(_e,{reviews:n.data,user:e.state.lupa_user})})}}),a.a.createElement(Ue.a,{exact:!0,path:"/userreviews",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Je,{query:J,prop:"reviewsForUserGroups"},function(n){return console.log("STTAET",n),a.a.createElement(_e,{reviews:n.data,user:e.state.lupa_user})}))}}),a.a.createElement(Ue.a,{exact:!0,path:"/account",component:function(){return a.a.createElement(an,{user:e.state.user,lupa_user:e.state.lupa_user})}}),a.a.createElement(Ue.a,{exact:!0,path:"/register",component:ie}),a.a.createElement(Ue.a,{exact:!0,path:"/user/:name",component:function(n){return a.a.createElement(Ze,Object.assign({},n,{user:e.state.lupa_user}))}}),a.a.createElement(Ue.a,{exact:!0,path:"/group/:name",component:function(n){return a.a.createElement(We,Object.assign({},n,{user:e.state.lupa_user}))}}),a.a.createElement(Ue.a,{component:function(){return a.a.createElement("div",null,"Couldn't find the page/url you're looking for")}})))}))),document.getElementById("root"))}},[[180,2,1]]]);
//# sourceMappingURL=main.bc78a149.chunk.js.map